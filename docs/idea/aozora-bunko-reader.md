# 青空文庫 RubyLingo リーダー

## 🎯 コンセプト

青空文庫の書籍を RubyLingo 変換して表示する書籍リーダー。読書しながら大量の英単語に自然に触れる革新的な学習体験を提供する。

### 核心価値

**「読書 × 英単語シャワー = 最強の語彙学習」**

- 小説 1 冊で 10 万語以上の英単語露出
- ストーリーを楽しみながら自然な語彙習得
- 継続可能な学習体験（面白い本は最後まで読む）

## 🔧 技術アーキテクチャ

### 分割処理戦略

```
青空文庫API → テキスト取得 → 章/段落分割 → 画面表示分のみ変換 → ルビ表示
```

### メモリ効率化

- **ページング**: 1 画面 = 1000-2000 文字
- **先読み**: 次ページを非同期変換
- **キャッシュ**: 既読ページの変換結果保持
- **ガベージ**: 古いページのメモリ解放

### レスポンス最適化

```javascript
// 画面分割変換の実装例
async function convertPage(text, startIndex, pageSize) {
  const pageText = text.slice(startIndex, startIndex + pageSize);
  return await rubyLingoAPI.convert(pageText, "academic");
}

// 先読み処理
async function preloadNextPage(text, currentIndex, pageSize) {
  const nextPageIndex = currentIndex + pageSize;
  if (nextPageIndex < text.length) {
    cache[nextPageIndex] = await convertPage(text, nextPageIndex, pageSize);
  }
}
```

## 📚 機能設計

### 書籍リーダー機能

1. **青空文庫検索**

   - 作品名・著者名検索
   - ジャンル・時代別フィルタ
   - 人気ランキング表示

2. **ルビ設定**

   - 辞書レベル選択（basic/business/academic/comprehensive）
   - ルビ表示の ON/OFF 切り替え
   - フォントサイズ・色調整

3. **読書進捗**

   - ページ管理・ブックマーク
   - 読書履歴・再開位置
   - 章節ナビゲーション

4. **学習統計**
   - 露出英単語数カウント
   - 読了時間記録
   - 語彙レベル分析

### UI/UX 詳細

#### メイン画面

```
┌─────────────────────────────────────┐
│  青空文庫 RubyLingo リーダー        │
├─────────────────────────────────────┤
│ 🔍 [検索: 夏目漱石 こころ]             │
│                                     │
│ 📖 現在読書中:                       │
│   こころ（夏目漱石） - 第一章 85%      │
│                                     │
│ 📊 学習統計:                         │
│   今日の英単語露出: 1,247語           │
│   累計読了: 3冊                      │
└─────────────────────────────────────┘
```

#### 読書画面

```
┌─────────────────────────────────────┐
│ こころ - 第一章                      │ ⚙️  📊
├─────────────────────────────────────┤
│                                     │
│ <ruby>私<rt>I</rt></ruby>は          │
│ <ruby>その<rt>that</rt></ruby>       │
│ <ruby>人<rt>person</rt></ruby>を     │
│ <ruby>常<rt>always</rt></ruby>に     │
│ <ruby>先生<rt>teacher</rt></ruby>と   │
│ <ruby>呼<rt>call</rt></ruby>んで      │
│ いた。                               │
│                                     │
│ [85%] ████████████████████░░░        │
└─────────────────────────────────────┘
```

## 🚀 実装ロードマップ

### Phase 1: MVP（2 週間）

**基本機能実装**

- [ ] 青空文庫 API 統合
- [ ] テキスト取得・前処理
- [ ] ページ分割ロジック
- [ ] RubyLingo API 統合
- [ ] 基本読書 UI

### Phase 2: 高機能化（1 ヶ月）

**パフォーマンス最適化**

- [ ] 先読み・キャッシュシステム
- [ ] Web Workers 非同期処理
- [ ] ブックマーク・進捗管理
- [ ] 辞書切り替え・設定保存
- [ ] レスポンシブデザイン

### Phase 3: 学習機能（2 ヶ月）

**学習支援機能**

- [ ] 語彙露出統計・分析
- [ ] 読書レベル推定
- [ ] おすすめ書籍 AI 提案
- [ ] 学習進捗レポート
- [ ] ソーシャル機能（読書記録共有）

## 💡 技術的課題と解決策

### 課題 1: 変換遅延

**問題**: ページめくり時の待機時間
**解決策**:

- Web Workers での非同期処理
- 次ページの事前変換（先読み）
- 変換済みページのキャッシュ保持

### 課題 2: メモリ使用量

**問題**: 長編小説での메모리枯渇
**解決策**:

- ページ単位の分割処理
- 不要ページの積極的ガベージコレクション
- 設定可能なキャッシュサイズ上限

### 課題 3: 青空文庫の形式処理

**問題**: 既存ルビ記法（｜漢字《かんじ》）との競合
**解決策**:

- 青空文庫記法の事前削除
- 注釈・改行の正規化処理
- HTML エスケープ処理

### 課題 4: 学習効果の可視化

**問題**: 語彙習得の実感不足
**解決策**:

- リアルタイム英単語カウンター
- 日次・週次学習レポート
- レベルアップ通知システム

## 📊 ビジネス価値

### ターゲット市場

1. **日本語学習者（外国人）**

   - 日本文学を通じた日本語理解
   - 文化的コンテキストの習得

2. **英語学習者（日本人）**

   - 読書習慣と英語学習の融合
   - 大量語彙露出による自然習得

3. **読書愛好家**
   - 新しい読書体験の提供
   - 教養と語学の同時習得

### 収益モデル

1. **フリーミアム**

   - 基本機能無料
   - プレミアム辞書・分析機能有料

2. **サブスクリプション**

   - 月額制の高機能版
   - 無制限書籍アクセス

3. **教育機関向け**
   - 学校・塾向けライセンス
   - 学習管理機能付き

## 🎪 デモシナリオ

### シナリオ 1: 初回利用

1. **アプリ起動**: 青空文庫リーダー画面表示
2. **書籍検索**: "夏目漱石 こころ"を検索
3. **設定選択**: academic 辞書、ルビ表示 ON
4. **読書開始**: 第一章の変換・表示
5. **学習実感**: 1 章で 500 語の英単語露出を実感

### シナリオ 2: 継続利用

1. **再開**: 前回の読書位置から継続
2. **辞書切替**: business → comprehensive に変更
3. **統計確認**: 累計 3,000 語の英単語露出を確認
4. **新書籍**: AI 推薦による次の本を選択

## 🔮 将来的な拡張アイデア

### 短期拡張（3-6 ヶ月）

- **音声読み上げ**: TTS 連携でリスニング学習
- **単語テスト**: 読了後の確認テスト
- **難易度表示**: 書籍の語彙レベル事前表示

### 中期拡張（6-12 ヶ月）

- **多言語対応**: 中国語、韓国語ルビ
- **AI 要約**: 章ごとのサマリー自動生成
- **読書コミュニティ**: 感想・議論プラットフォーム

### 長期拡張（1 年以上）

- **VR 読書**: 没入型読書体験
- **AI 作家**: 学習者レベルに応じた小説自動生成
- **グローバル展開**: 各国文学作品への対応

## 🛠 技術スタック

### フロントエンド

- **React/Next.js**: モダン SPA 構築
- **TypeScript**: 型安全性確保
- **Tailwind CSS**: 高速 UI 開発
- **PWA**: オフライン読書対応

### バックエンド

- **既存 RubyLingo API**: 変換エンジン
- **青空文庫 API**: 書籍データ取得
- **Redis**: キャッシュ・セッション管理
- **PostgreSQL**: ユーザー・進捗データ

### インフラ

- **Vercel**: フロントエンド配信
- **AWS Lambda**: 既存 API 活用
- **CDN**: 書籍データ高速配信

## 📋 実装チェックリスト

### Core Features

- [ ] 青空文庫 API 統合
- [ ] RubyLingo API 統合
- [ ] ページ分割・キャッシュシステム
- [ ] 基本読書 UI
- [ ] 進捗管理

### Advanced Features

- [ ] 先読み最適化
- [ ] 学習統計
- [ ] 設定管理
- [ ] ブックマーク
- [ ] 検索・推薦機能

### Performance

- [ ] メモリ使用量最適化
- [ ] 応答時間短縮
- [ ] オフライン対応
- [ ] モバイル最適化

## 💭 備考

このアイデアは既存の RubyLingo 技術基盤を活用できるため、開発コストを抑えながら高い付加価値を提供できる。特に「読書」という継続的行動と「英語学習」を融合させる点で、従来の学習アプリとは一線を画す革新性がある。

青空文庫のパブリックドメイン作品を活用することで、著作権問題を回避しながら豊富なコンテンツを提供できる点も大きな優位性である。
