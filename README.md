# 日本語ルビ英訳 Chrome拡張機能 仕様書

## 1. 概要

### 1.1 プロダクト名
RubyLingo (Chrome Extension)

### 1.2 コンセプト
**「あらゆるWebページを瞬時に英語学習教材に変換」**

日本語で書かれたWebページを形態素解析し、各単語に英訳ルビを自動挿入。普段のブラウジングを英語学習時間に変える。

### 1.3 動作例
**変換前:**
```
今日は良い天気ですね。
```

**変換後:**
```html
<ruby>今日<rt>today</rt></ruby><ruby>は<rt>TOP</rt></ruby><ruby>良い<rt>good</rt></ruby><ruby>天気<rt>weather</rt></ruby><ruby>です<rt>is</rt></ruby><ruby>ね<rt>right</rt></ruby>。
```

## 2. 機能仕様

### 2.1 基本動作
1. Webページの日本語テキストを検出
2. 形態素解析でトークン分割  
3. 各トークンに英訳ルビを挿入
4. 元のページレイアウトを維持

### 2.2 ON/OFF制御
- **拡張機能アイコンクリック**: ON ⟷ OFF 切り替え
- **ON状態**: 全ての日本語にルビ表示
- **OFF状態**: 元のページに復元

### 2.3 対象・除外
**対象:**
- `<p>`, `<span>`, `<div>`, `<h1-h6>`, `<li>` 等のテキストノード
- 日本語を含む全てのテキスト

**除外:**  
- `<script>`, `<style>`, `<code>`, `<pre>`
- 入力フォーム（`<input>`, `<textarea>`）

## 3. 技術仕様

### 3.1 Chrome拡張機能構成
```
manifest.json          # 拡張機能設定
content-script.js       # ページ内容操作（メイン処理）
background.js          # ON/OFF状態管理
popup.html/js/css      # ON/OFFボタンのみ
```

### 3.2 使用技術
- **JavaScript**: ES2020+
- **形態素解析**: kuromoji.js
- **翻訳辞書**: JSON形式の静的辞書（基本語彙5000語）
- **ストレージ**: Chrome Storage API（ON/OFF状態のみ）

### 3.3 処理フロー
```
ページ読み込み
    ↓
ON状態確認
    ↓
日本語テキスト検出
    ↓
形態素解析
    ↓
英訳ルビ挿入
    ↓
表示完了
```

## 4. ユーザーインターフェース

### 4.1 拡張機能ポップアップ
```
┌────────────┐
│ RubyLingo  │
│            │
│   ● ON     │  ← クリック切り替えのみ
│            │
└────────────┘
```

### 4.2 設定項目
なし（全てデフォルト固定）

## 5. 実装仕様

### 5.1 翻訳辞書フォーマット
```json
{
  "今日": "today",
  "天気": "weather", 
  "良い": "good",
  "は": "TOP",
  "です": "is",
  "を": "ACC",
  "に": "to/at/in"
}
```

### 5.2 状態管理
```json
{
  "enabled": true  // これだけ
}
```

### 5.3 パフォーマンス要件
- **初回表示**: 3秒以内
- **メモリ使用量**: 30MB以下  
- **対象**: 日本語サイト全般

## 6. 開発計画

### 6.1 MVP実装（2週間）
- [ ] kuromoji.js組み込み
- [ ] 基本5000語辞書作成
- [ ] ルビ挿入ロジック
- [ ] ON/OFF切り替え機能

### 6.2 リリース準備（1週間）
- [ ] 主要サイトでのテスト
- [ ] パフォーマンス最適化
- [ ] Chrome Web Store申請

## 7. 成功指標

### 7.1 技術指標
- エラー率: 1%以下
- 処理速度: 3秒以内
- メモリ効率: 30MB以下

### 7.2 利用指標
- 初月インストール: 100人
- 週次アクティブ率: 70%以上
- 平均利用時間: 10分/日以上

## 8. 制約事項

### 8.1 技術制約
- クライアントサイド処理のみ
- 外部API不使用（完全オフライン）
- Chrome拡張機能のセキュリティ制限

### 8.2 機能制約
- 静的辞書のみ（動的翻訳なし）
- カスタマイズ機能なし
- 学習履歴機能なし

## 9. ユーザーストーリー

**「ニュースを読むだけで英語が身につく」**
1. Chrome拡張機能をインストール
2. Yahoo!ニュースにアクセス
3. 自動で全単語にルビが表示される
4. 記事を読む = 英単語学習

**対象コンテンツ:**
- ニュースサイト
- 個人ブログ  
- SNS投稿
- 技術記事
- ショッピングサイト

## 10. 価値提案

### 10.1 ユーザーメリット
- **学習時間ゼロ**: 普段のブラウジングが学習に
- **大量インプット**: 1日数百〜数千の英単語に接触
- **コンテキスト学習**: 生きた文章での語彙習得
- **継続性**: 特別な意識不要で自然に続く

### 10.2 競合との差別化
- **設定不要**: インストールするだけ
- **選択不要**: 全サイトが自動で教材に
- **学習不要**: 使い方を覚える必要なし

極限までシンプル。これが最高のユーザー体験。